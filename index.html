import { initializeApp } from "firebase/app";
import { getAuth, onAuthStateChanged } from "firebase/auth";
import { getFirestore, doc, setDoc, getDoc } from "firebase/firestore";
import { getAI, getGenerativeModel, GoogleAIBackend } from "firebase/ai";

// Firebase config senin proje bilgilerin olacak
const firebaseConfig = {
  apiKey: "...",
  authDomain: "...",
  projectId: "...",
  storageBucket: "...",
  messagingSenderId: "...",
  appId: "..."
};

// Firebase baÅŸlat
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Gemini backend
const ai = getAI(app, { backend: new GoogleAIBackend() });
const model = getGenerativeModel(ai, { model: "gemini-2.5-flash" });

// ðŸŽ­ NPC Diyalog Ãœretici Fonksiyon
async function getNpcDialog(context) {
  const prompt = `Sen Eywallah Sim oyunundaki bir NPC'sin.
  Konu: ${context}.
  Oyuncuya kÄ±sa ve eÄŸlenceli bir diyalog kur. 
  TÃ¼rkÃ§e yaz ve cevap seÃ§enekleri olsun.`;

  const result = await model.generateContent({
    contents: [{ role: "user", parts: [{ text: prompt }] }]
  });

  return result.response.text();
}

// ðŸ”¥ KullanÄ±m
async function talkToNpc(location) {
  const dialog = await getNpcDialog(`Oyuncu ÅŸu yerde: ${location}`);
  document.getElementById("eventText").innerText = dialog;
  document.getElementById("eventBox").style.display = "block";
}
